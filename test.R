
source("getDataFunctions.R")
# test
# voor nutrienten:
parID <- c(26,2829,1996,528,2370,529,530,531,1843,1019,828,834,866,1010,3217,833,1021,1022,1972)
startyear = 2018
endyear = 2019
df <- getSMdata(startyear = startyear, endyear = endyear, parID = parID)
as.character(max(df$value))
summary(df)



# Fytoplankton
# met de hand geselecteerd op Westerschelde+Scheldemonding en functional group phytoplankton
url <- "http://geo.vliz.be/geoserver/wfs/ows?service=WFS&version=1.1.0&request=GetFeature&typeName=Dataportal%3Abiotic_observations&resultType=results&viewParams=where%3Aobs.context+%26%26+ARRAY%5B1%5D+AND+%28gID+IN+%2810%5C%2C9%29%29%3Bcontext%3A0001%3Baphiaid%3A149191%5C%2C149387%5C%2C148944%5C%2C148945%5C%2C149164%5C%2C160651%5C%2C148948%5C%2C148949%5C%2C109470%5C%2C109473%5C%2C149200%5C%2C248098%5C%2C148954%5C%2C148955%5C%2C148956%5C%2C149139%5C%2C251745%5C%2C160519%5C%2C160520%5C%2C149280%5C%2C148959%5C%2C149149%5C%2C149118%5C%2C164108%5C%2C149119%5C%2C447730%5C%2C149306%5C%2C149655%5C%2C148969%5C%2C149136%5C%2C149137%5C%2C110128%5C%2C149616%5C%2C149357%5C%2C341285%5C%2C149619%5C%2C178126%5C%2C109950%5C%2C109963%5C%2C109967%5C%2C163931%5C%2C163938%5C%2C148985%5C%2C149241%5C%2C149292%5C%2C149299%5C%2C149124%5C%2C149297%5C%2C149129%5C%2C156609%5C%2C149623%5C%2C156611%5C%2C163026%5C%2C149289%5C%2C149171%5C%2C149221%5C%2C149120%5C%2C149219%5C%2C149126%5C%2C149121%5C%2C149128%5C%2C149122%5C%2C160521%5C%2C465524%5C%2C160523%5C%2C156617%5C%2C549193%5C%2C178229%5C%2C163118%5C%2C149296%5C%2C149127%5C%2C149294%5C%2C163015%5C%2C149123%5C%2C156621%5C%2C156623%5C%2C149125%5C%2C163161%5C%2C233776%5C%2C115090%5C%2C115128%5C%2C109474%5C%2C149110%5C%2C162519%5C%2C148917%5C%2C149159%5C%2C148992%5C%2C149266%5C%2C149271%5C%2C179608%5C%2C149272%5C%2C179616%5C%2C149158%5C%2C162761%5C%2C149263%5C%2C156632%5C%2C148905%5C%2C163196%5C%2C148906%5C%2C149004%5C%2C149570%5C%2C149012%5C%2C149310%5C%2C248064%5C%2C149179%5C%2C149285%5C%2C149286%5C%2C149647%5C%2C157258%5C%2C157260%5C%2C157240%5C%2C109462%5C%2C162793%5C%2C149018%5C%2C109515%5C%2C110137%5C%2C110325%5C%2C149023%5C%2C156598%5C%2C149131%5C%2C8012%5C%2C345464%5C%2C149028%5C%2C148952%5C%2C149239%5C%2C345475%5C%2C110146%5C%2C163146%5C%2C109519%5C%2C110015%5C%2C110041%5C%2C162755%5C%2C149112%5C%2C149132%5C%2C149113%5C%2C109475%5C%2C232765%5C%2C109813%5C%2C162544%5C%2C109831%5C%2C232880%5C%2C109476%5C%2C109854%5C%2C149033%5C%2C149493%5C%2C149494%5C%2C149210%5C%2C157438%5C%2C157440%5C%2C109540%5C%2C233615%5C%2C233619%5C%2C233807%5C%2C149135%5C%2C549205%5C%2C149037%5C%2C149038%5C%2C149106%5C%2C149039%5C%2C17651%5C%2C149321%5C%2C149322%5C%2C345485%5C%2C149042%5C%2C149243%5C%2C418547%5C%2C149044%5C%2C149251%5C%2C341546%5C%2C115075%5C%2C149145%5C%2C109993%5C%2C134533%5C%2C134564%5C%2C573486%5C%2C149142%5C%2C149232%5C%2C345491%5C%2C134524%5C%2C149045%5C%2C149587%5C%2C176410%5C%2C149150%5C%2C109500%5C%2C148963%5C%2C149050%5C%2C345492%5C%2C149156%5C%2C164116%5C%2C149094%5C%2C149157%5C%2C163292%5C%2C149051%5C%2C149095%5C%2C162954%5C%2C699554%5C%2C110284%5C%2C156641%5C%2C149055%5C%2C136779%5C%2C109447%5C%2C109549%5C%2C115088%5C%2C149352%5C%2C149056%5C%2C1442452%5C%2C149516%5C%2C149181%5C%2C149504%5C%2C149183%5C%2C231883%5C%2C231884%5C%2C149032%5C%2C345506%5C%2C109485%5C%2C345513%5C%2C109566%5C%2C110291%5C%2C110304%5C%2C110314%5C%2C110321%5C%2C109553%5C%2C110233%5C%2C232897%5C%2C149151%5C%2C478556%5C%2C149153%5C%2C246606%5C%2C375883%5C%2C156548%5C%2C160528%5C%2C418222%5C%2C246609%5C%2C160599%5C%2C577639%5C%2C134566%5C%2C341609%5C%2C134529%5C%2C160513%5C%2C109555%5C%2C232598%5C%2C149065%5C%2C149066%5C%2C149069%5C%2C149223%5C%2C149114%5C%2C149231%5C%2C149070%5C%2C149071%5C%2C149116%5C%2C231887%5C%2C149117%5C%2C149311%5C%2C149115%5C%2C149165%5C%2C160531%5C%2C149224%5C%2C149629%5C%2C149105%5C%2C109545%5C%2C110172%5C%2C149073%5C%2C149074%5C%2C163390%5C%2C149075%5C%2C149316%5C%2C148994%5C%2C149079%5C%2C149630%5C%2C231888%5C%2C149631%5C%2C149177%5C%2C149084%5C%2C134526%5C%2C162935%5C%2C149092%5C%2C555052%5C%2C149093%5C%2C148912%5C%2C148937%5C%2C148914%5C%2C156690%5C%2C148919%5C%2C555264%5C%2C149160%5C%2C149102%5C%2C148923%5C%2C149103%5C%2C149308%5C%2C148929%5C%2C148931%5C%2C148936%5C%2C148942%5C%2C149101%5C%2C109479%5C%2C149147%5C%2C149319%5C%2C149170%5C%2C149518%5C%2C176385%5C%2C600947%5C%2C109491&propertyName=stationname%2Caphiaid%2Cscientificname%2Cobservationdate%2Clongitude%2Clatitude%2Cvalue%2Cparametername%2Cdataprovider%2Cimisdatasetid%2Cdatasettitle%2Cdatafichetitle&outputFormat=csv"
u = httr::parse_url(url)
v = httr::build_url(u)
u$query # e.g. 149135

parID <- c(119939)
startyear = 2015
endyear = 2020
dt <- getSMoccurenceData(startyear = startyear, endyear = endyear, parID = parID)

# waves
parID <- c(281816)
dt <- getSMdata(startyear = startyear, endyear = endyear, parID = parID)
# van HKV script:
urlwaves = 'http://geo.vliz.be/geoserver/wfs/ows?service=WFS&version=1.1.0&request=GetFeature&typeName=Dataportal%3Aabiotic_observations&resultType=results&viewParams=where%3Aobs.context+%26%26+ARRAY%5B1%5D+AND+standardparameterid+IN+%281816%29+AND+%28%28datetime_search+BETWEEN+%272015-01-01%27+AND+%272020-12-32%27+%29%29%3Bcontext%3A0001&propertyName=stationname%2Clongitude%2Clatitude%2Cdatetime%2Cdepth%2Cparametername%2Cvaluesign%2Cvalue%2Cdataprovider%2Cdatasettitle&outputFormat=csv'
data.table::fread(urlwaves) # werkt

GEOTERM81-83          - Unknown (ZZ99)






dt <- sf::st_read(sub("csv", "GML2", url))
dt <- sf::st_read(sub("csv", "GML2", v))
utils::URLdecode("http://geo.vliz.be/geoserver/wfs/ows?service=WFS&version=1.1.0&request=GetFeature&typeName=Dataportal%3Abiotic_observations&resultType=results&viewParams=where%3Aobs.context+%26%26+ARRAY%5B1%5D+AND+imisdatasetid+IN+%28587%29%3Bcontext%3A0001%3Bloggedin%3A1&propertyName=stationname%2Caphiaid%2Cscientificname%2Cobservationdate%2Clongitude%2Clatitude%2Cvalue%2Cparametername%2Cdataprovider%2Cimisdatasetid%2Cdatasettitle%2Cdatafichetitle&outputFormat=csv")



# Macrobenthos
# url was te lang om in een keer in te lezen !?
# 
baseurl = "http://geo.vliz.be/geoserver/wfs/ows?service=WFS&version=1.1.0&request=GetFeature&typeName=Dataportal%3Abiotic_observations&resultType=results&"
url2 = 'viewParams=where%3Aobs.context+%26%26+ARRAY%5B1%5D+AND+%28gID+IN+%2810%5C%2C9%29%29%3Bcontext%3A0001%3Baphiaid%3A149191%5C%2C149387%5C%2C148944%5C%2C148945%5C%2C149164%5C%2C160651%5C%2C148948%5C%2C148949%5C%2C109470%5C%2C109473%5C%2C149200%5C%2C248098%5C%2C148954%5C%2C148955%5C%2C148956%5C%2C149139%5C%2C251745%5C%2C160519%5C%2C160520%5C%2C149280%5C%2C148959%5C%2C149149%5C%2C149118%5C%2C164108%5C%2C149119%5C%2C447730%5C%2C149306%5C%2C149655%5C%2C148969%5C%2C149136%5C%2C149137%5C%2C110128%5C%2C149616%5C%2C149357%5C%2C341285%5C%2C149619%5C%2C178126%5C%2C109950%5C%2C109963%5C%2C109967%5C%2C163931%5C%2C163938%5C%2C148985%5C%2C149241%5C%2C149292%5C%2C149299%5C%2C149124%5C%2C149297%5C%2C149129%5C%2C156609%5C%2C149623%5C%2C156611%5C%2C163026%5C%2C149289%5C%2C149171%5C%2C149221%5C%2C149120%5C%2C149219%5C%2C149126%5C%2C149121%5C%2C149128%5C%2C149122%5C%2C160521%5C%2C465524%5C%2C160523%5C%2C156617%5C%2C549193%5C%2C178229%5C%2C163118%5C%2C149296%5C%2C149127%5C%2C149294%5C%2C163015%5C%2C149123%5C%2C156621%5C%2C156623%5C%2C149125%5C%2C163161%5C%2C233776%5C%2C115090%5C%2C115128%5C%2C109474%5C%2C149110%5C%2C162519%5C%2C148917%5C%2C149159%5C%2C148992%5C%2C149266%5C%2C149271%5C%2C179608%5C%2C149272%5C%2C179616%5C%2C149158%5C%2C162761%5C%2C149263%5C%2C156632%5C%2C148905%5C%2C163196%5C%2C148906%5C%2C149004%5C%2C149570%5C%2C149012%5C%2C149310%5C%2C248064%5C%2C149179%5C%2C149285%5C%2C149286%5C%2C149647%5C%2C157258%5C%2C157260%5C%2C157240%5C%2C109462%5C%2C162793%5C%2C149018%5C%2C109515%5C%2C110137%5C%2C110325%5C%2C149023%5C%2C156598%5C%2C149131%5C%2C8012%5C%2C345464%5C%2C149028%5C%2C148952%5C%2C149239%5C%2C345475%5C%2C110146%5C%2C163146%5C%2C109519%5C%2C110015%5C%2C110041%5C%2C162755%5C%2C149112%5C%2C149132%5C%2C149113%5C%2C109475%5C%2C232765%5C%2C109813%5C%2C162544%5C%2C109831%5C%2C232880%5C%2C109476%5C%2C109854%5C%2C149033%5C%2C149493%5C%2C149494%5C%2C149210%5C%2C157438%5C%2C157440%5C%2C109540%5C%2C233615%5C%2C233619%5C%2C233807%5C%2C149135%5C%2C549205%5C%2C149037%5C%2C149038%5C%2C149106%5C%2C149039%5C%2C17651%5C%2C149321%5C%2C149322%5C%2C345485%5C%2C149042%5C%2C149243%5C%2C418547%5C%2C149044%5C%2C149251%5C%2C341546%5C%2C115075%5C%2C149145%5C%2C109993%5C%2C134533%5C%2C134564%5C%2C573486%5C%2C149142%5C%2C149232%5C%2C345491%5C%2C134524%5C%2C149045%5C%2C149587%5C%2C176410%5C%2C149150%5C%2C109500%5C%2C148963%5C%2C149050%5C%2C345492%5C%2C149156%5C%2C164116%5C%2C149094%5C%2C149157%5C%2C163292%5C%2C149051%5C%2C149095%5C%2C162954%5C%2C699554%5C%2C110284%5C%2C156641%5C%2C149055%5C%2C136779%5C%2C109447%5C%2C109549%5C%2C115088%5C%2C149352%5C%2C149056%5C%2C1442452%5C%2C149516%5C%2C149181%5C%2C149504%5C%2C149183%5C%2C231883%5C%2C231884%5C%2C149032%5C%2C345506%5C%2C109485%5C%2C345513%5C%2C109566%5C%2C110291%5C%2C110304%5C%2C110314%5C%2C110321%5C%2C109553%5C%2C110233%5C%2C232897%5C%2C149151%5C%2C478556%5C%2C149153%5C%2C246606%5C%2C375883%5C%2C156548%5C%2C160528%5C%2C418222%5C%2C246609%5C%2C160599%5C%2C577639%5C%2C134566%5C%2C341609%5C%2C134529%5C%2C160513%5C%2C109555%5C%2C232598%5C%2C149065%5C%2C149066%5C%2C149069%5C%2C149223%5C%2C149114%5C%2C149231%5C%2C149070%5C%2C149071%5C%2C149116%5C%2C231887%5C%2C149117%5C%2C149311%5C%2C149115%5C%2C149165%5C%2C160531%5C%2C149224%5C%2C149629%5C%2C149105%5C%2C109545%5C%2C110172%5C%2C149073%5C%2C149074%5C%2C163390%5C%2C149075%5C%2C149316%5C%2C148994%5C%2C149079%5C%2C149630%5C%2C231888%5C%2C149631%5C%2C149177%5C%2C149084%5C%2C134526%5C%2C162935%5C%2C149092%5C%2C555052%5C%2C149093%5C%2C148912%5C%2C148937%5C%2C148914%5C%2C156690%5C%2C148919%5C%2C555264%5C%2C149160%5C%2C149102%5C%2C148923%5C%2C149103%5C%2C149308%5C%2C148929%5C%2C148931%5C%2C148936%5C%2C148942%5C%2C149101%5C%2C109479%5C%2C149147%5C%2C149319%5C%2C149170%5C%2C149518%5C%2C176385%5C%2C600947%5C%2C109491%5C%2C102788%5C%2C138474%5C%2C141433%5C%2C141'
url3 = '435%5C%2C141439%5C%2C137732%5C%2C138992%5C%2C119939%5C%2C134568%5C%2C134599%5C%2C134600%5C%2C146893%5C%2C2847%5C%2C1360%5C%2C140687%5C%2C234850%5C%2C234851%5C%2C102789%5C%2C134607%5C%2C421139%5C%2C125064%5C%2C123206%5C%2C152441%5C%2C106671%5C%2C134723%5C%2C134725%5C%2C1292%5C%2C129605%5C%2C146895%5C%2C101368%5C%2C129240%5C%2C129938%5C%2C102160%5C%2C129840%5C%2C148594%5C%2C236495%5C%2C129206%5C%2C129867%5C%2C129868%5C%2C129430%5C%2C730747%5C%2C1839%5C%2C103718%5C%2C103443%5C%2C138814%5C%2C123776%5C%2C123121%5C%2C123080%5C%2C699641%5C%2C152231%5C%2C129646%5C%2C238454%5C%2C155048%5C%2C131267%5C%2C106057%5C%2C106215%5C%2C743898%5C%2C111803%5C%2C140767%5C%2C103058%5C%2C103060%5C%2C103066%5C%2C103068%5C%2C103073%5C%2C105%5C%2C131114%5C%2C110444%5C%2C110445%5C%2C110378%5C%2C106673%5C%2C146142%5C%2C138878%5C%2C129483%5C%2C130735%5C%2C107276%5C%2C129211%5C%2C129876%5C%2C921%5C%2C146761%5C%2C101430%5C%2C101839%5C%2C101851%5C%2C101361%5C%2C106922%5C%2C107381%5C%2C429247%5C%2C229%5C%2C106674%5C%2C137735%5C%2C138998%5C%2C103732%5C%2C919%5C%2C1082%5C%2C397047%5C%2C139410%5C%2C101376%5C%2C101489%5C%2C102082%5C%2C102087%5C%2C102088%5C%2C102092%5C%2C102093%5C%2C102096%5C%2C102101%5C%2C129984%5C%2C107007%5C%2C107551%5C%2C107552%5C%2C106782%5C%2C138297%5C%2C140656%5C%2C138963%5C%2C1137%5C%2C110465%5C%2C147474%5C%2C118474%5C%2C1130%5C%2C621926%5C%2C149180%5C%2C143082%5C%2C110398%5C%2C110472%5C%2C110487%5C%2C107199%5C%2C129967%5C%2C139604%5C%2C101736%5C%2C123160%5C%2C124392%5C%2C1806%5C%2C123082%5C%2C238104%5C%2C2038%5C%2C138333%5C%2C140732%5C%2C876640%5C%2C139718%5C%2C107451%5C%2C129443%5C%2C130613%5C%2C130616%5C%2C152229%5C%2C129445%5C%2C130639%5C%2C129446%5C%2C130644%5C%2C130375%5C%2C118401%5C%2C118852%5C%2C327985%5C%2C146907%5C%2C130988%5C%2C131065%5C%2C130103%5C%2C1207%5C%2C102275%5C%2C102276%5C%2C102281%5C%2C102292%5C%2C102296%5C%2C102299%5C%2C101%5C%2C119859%5C%2C120020%5C%2C129488%5C%2C130749%5C%2C152313%5C%2C129296%5C%2C130116%5C%2C130118%5C%2C130130%5C%2C118278%5C%2C152386%5C%2C132627%5C%2C129491%5C%2C130762%5C%2C571832%5C%2C152449%5C%2C340463%5C%2C130769%5C%2C130770%5C%2C1102%5C%2C102317%5C%2C152302%5C%2C106964%5C%2C107454%5C%2C158417%5C%2C389288%5C%2C130646%5C%2C129884%5C%2C416627%5C%2C107518%5C%2C106903%5C%2C107322%5C%2C140126%5C%2C120%5C%2C152250%5C%2C118454%5C%2C119046%5C%2C1131%5C%2C264171%5C%2C101571%5C%2C102431%5C%2C102433%5C%2C142025%5C%2C142095%5C%2C872696%5C%2C345281%5C%2C155155%5C%2C152367%5C%2C129697%5C%2C131495%5C%2C118958%5C%2C152774%5C%2C129496%5C%2C130801%5C%2C880017%5C%2C143251%5C%2C106925%5C%2C146912%5C%2C107388%5C%2C107390%5C%2C107392%5C%2C138135%5C%2C140262%5C%2C140263%5C%2C140264%5C%2C141579%5C%2C106926%5C%2C205077%5C%2C107344%5C%2C107345%5C%2C107346%5C%2C2851%5C%2C230%5C%2C836033%5C%2C129341%5C%2C130269%5C%2C130271%5C%2C130272%5C%2C129614%5C%2C131131%5C%2C333954%5C%2C131134%5C%2C147006%5C%2C1044546%5C%2C863197%5C%2C130816%5C%2C129535%5C%2C130926%5C%2C129615%5C%2C181523%5C%2C131135%5C%2C131136%5C%2C129892%5C%2C146922%5C%2C102843%5C%2C120072%5C%2C101471%5C%2C102043%5C%2C102048%5C%2C129313%5C%2C130171%5C%2C130172%5C%2C130174%5C%2C130176%5C%2C101561%5C%2C102380%5C%2C140467%5C%2C103509%5C%2C103788%5C%2C148591%5C%2C225814%5C%2C148592%5C%2C422916%5C%2C140371%5C%2C156870%5C%2C138211%5C%2C140430%5C%2C245%5C%2C247%5C%2C129659%5C%2C845991%5C%2C292896%5C%2C140380%5C%2C149668%5C%2C119822%5C%2C120089%5C%2C211%5C%2C138228%5C%2C140480%5C%2C140513%5C%2C181484%5C%2C149143%5C%2C107398%5C%2C799%5C%2C152391%5C%2C129702%5C%2C131504%5C%2C119888%5C%2C157807%5C%2C120136%5C%2C143254%5C%2C956%5C%2C129370%5C%2C130355%5C%2C130357%5C%2C130359%5C%2C130364%5C%2C22496%5C%2C324346%5C%2C129379%5C%2C130394%5C%2C146928%5C%2C155187%5C%2C129898%5C%2C102139%5C%2C140403%5C%2C1762%5C%2C134591%5C%2C150520%5C%2C1566%5C%2C134705%5C%2C418'
url4 = '591%5C%2C2036%5C%2C129413%5C%2C130491%5C%2C130494%5C%2C130496%5C%2C125131%5C%2C123574%5C%2C124913%5C%2C124929%5C%2C124940%5C%2C123117%5C%2C123200%5C%2C123084%5C%2C103202%5C%2C215%5C%2C130544%5C%2C710680%5C%2C106854%5C%2C107232%5C%2C107032%5C%2C107613%5C%2C107614%5C%2C107034%5C%2C107624%5C%2C106788%5C%2C107615%5C%2C181372%5C%2C107616%5C%2C587704%5C%2C107651%5C%2C130582%5C%2C119001%5C%2C491532%5C%2C102440%5C%2C137485%5C%2C903%5C%2C146932%5C%2C103007%5C%2C103008%5C%2C101857%5C%2C595701%5C%2C130595%5C%2C130592%5C%2C151628%5C%2C102915%5C%2C138332%5C%2C140730%5C%2C156961%5C%2C23091%5C%2C107562%5C%2C252%5C%2C129439%5C%2C130601%5C%2C130603%5C%2C1789%5C%2C148378%5C%2C102387%5C%2C134741%5C%2C101864%5C%2C129455%5C%2C334512%5C%2C931%5C%2C155424%5C%2C107418%5C%2C107188%5C%2C149057%5C%2C130417%5C%2C103020%5C%2C130195%5C%2C130711%5C%2C154304%5C%2C883%5C%2C129710%5C%2C129619%5C%2C155378%5C%2C146933%5C%2C131141%5C%2C131143%5C%2C152351%5C%2C340599%5C%2C939%5C%2C102916%5C%2C107190%5C%2C107400%5C%2C106763%5C%2C119898%5C%2C120177%5C%2C131362%5C%2C148638%5C%2C130041%5C%2C130837%5C%2C129514%5C%2C124319%5C%2C130859%5C%2C110427%5C%2C148680%5C%2C110626%5C%2C129621%5C%2C131169%5C%2C1302%5C%2C134744%5C%2C131170%5C%2C141134%5C%2C107414%5C%2C231750%5C%2C156384%5C%2C130967%5C%2C130867%5C%2C985%5C%2C130972%5C%2C119905%5C%2C120203%5C%2C120206%5C%2C142101%5C%2C129623%5C%2C131171%5C%2C334741%5C%2C157566%5C%2C334772%5C%2C138467%5C%2C141424%5C%2C1781%5C%2C106210%5C%2C138477%5C%2C141444%5C%2C138483%5C%2C141454%5C%2C988%5C%2C106033%5C%2C943%5C%2C124418%5C%2C118433%5C%2C140432%5C%2C129625%5C%2C131183%5C%2C131184%5C%2C131185%5C%2C913%5C%2C131187%5C%2C560033%5C%2C138159%5C%2C140300%5C%2C140301%5C%2C140302%5C%2C103166%5C%2C131074%5C%2C129627%5C%2C131191&propertyName=stationname%2Caphiaid%2Cscientificname%2Cobservationdate%2Clongitude%2Clatitude%2Cvalue%2Cparametername%2Cdataprovider%2Cimisdatasetid%2Cdatasettitle%2Cdatafichetitle&outputFormat=csv'  
  
httr::parse_url(paste0(baseurl, url2, url3, url4))
dt <- data.table::fread(paste0(baseurl, url2, url3, url4)) # werkt niet, url te lang?

url10 <- paste0(baseurl, url2, url3, url4)
utils::URLdecode(url10)
dt <- sf::st_read(sub("csv", "GML2", url10))


# HKV script:

dataset_link <- "http://geo.vliz.be/geoserver/wfs/ows?service=WFS&version=1.1.0&request=GetFeature&typeName=Dataportal%3Abiotic_observations&resultType=results&viewParams=where%3Aobs.context+%26%26+ARRAY%5B1%5D+AND+imisdatasetid+IN+%28587%29%3Bcontext%3A0001%3Bloggedin%3A1&propertyName=stationname%2Caphiaid%2Cscientificname%2Cobservationdate%2Clongitude%2Clatitude%2Cvalue%2Cparametername%2Cdataprovider%2Cimisdatasetid%2Cdatasettitle%2Cdatafichetitle&outputFormat=csv"

################################################
## 1 - Data inlezen
################################################

df0 <- dataset_link %>% 
  # make_link_with_login() %>%
  url() %>%
  read.csv()

